---
# Alpha â€“ Anny Hua
# Service: Windows DNS Server
# Description: Installs DNS, enables the service, and creates an internal DNS zone

- name: Install DNS Server role
  ansible.windows.win_feature:
    name: DNS
    state: present
    include_management_tools: true

- name: Ensure DNS service is running and enabled
  ansible.windows.win_service:
    name: DNS
    start_mode: auto
    state: started

- name: Create forward lookup zone for inscope.local
  ansible.windows.win_dns_zone:
    name: "inscope.local"
    type: primary
    state: present

- name: Ensure DNS server A record exists
  ansible.windows.win_dns_record:
    zone: "inscope.local"
    name: "canterlot"
    type: "A"
    value: "10.0.10.1"
    state: present