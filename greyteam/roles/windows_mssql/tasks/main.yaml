---
# MSSQL requires that system does not have any pending restarts when it is installed
- name: Reboot if Required
  ansible.builtin.include_tasks: reboot.yaml

- name: Install MSSQL
  ansible.builtin.include_tasks: install.yaml

- name: Configure Firewall for MSSQL
  ansible.builtin.include_tasks: firewall.yaml
  when: mssql_firewall

- name: install SSMS
  ansible.builtin.include_tasks: ssms_install.yaml

- name: repair sqlcmd if needed
  ansible.builtin.include_tasks: repair_sqlcmd.yaml

- name: Setup mssql tools
  ansible.builtin.include_tasks: mssql_tools.yaml
  delegate_to: localhost

- name: Add MSSQL Data
  ansible.builtin.include_tasks: data.yaml

- name: Reboot if Required
  ansible.builtin.include_tasks: reboot.yaml